extends ./layout.jade

mixin box(name, node, func)
  -median= node.median
  -max= node.max
  .summarybox(class=(func(median)))= name
    .summarynumber #{median}&nbsp;
      span.summarysmall (#{max})

mixin boxInfo(name, node, formatter)
  -formatter = formatter || function(value) {return value}
  -median= node.median
  -max= node.max
  .summarybox.info= name
    .summarynumber #{formatter(median)}&nbsp;
      span.summarysmall (#{formatter(max)})      
      
block content
    h2 Summary
    p TODO There's alot we can do here. Now everything is hardcoded, lets fix that later. Can we make the numbers clickable/linkable?

    .row
      .one-third.column
        +box('Overall score', coach.summary.score, h.scoreLabel)
      .one-third.column
        +box('Performance score', coach.summary.performance.score, h.scoreLabel)
      .one-third.column
        +box('Accessibility score', coach.summary.accessibility.score, h.scoreLabel)

    .row
      .one-third.column
        +box('Best Practice score', coach.summary.bestpractice.score, h.scoreLabel)
      .one-third.column
        +boxInfo('Total requests', pagexray.summary.requests)
      .one-third.column
        +boxInfo('Image requests', pagexray.summary.image.requests)
    .row
      .one-third.column
        +boxInfo('CSS requests', pagexray.summary.css.requests)
      .one-third.column
        +boxInfo('Javascript requests', pagexray.summary.javascript.requests)
      .one-third.column
        +boxInfo('Font requests', pagexray.summary.font.requests)
    .row
      .one-third.column
        +boxInfo('Total size',  pagexray.summary.transferSize, h.size.format)
      .one-third.column
        +boxInfo('Image size', pagexray.summary.image.transferSize, h.size.format)
      .one-third.column
        +boxInfo('Javascript size', pagexray.summary.javascript.transferSize, h.size.format)
    .row
      .one-third.column
        +boxInfo('RUM Speed Index',  browsertime.summary.rumSpeedIndex)
      .one-third.column
        +boxInfo('Fully loaded', browsertime.summary.fullyLoaded)
      .one-third.column
        +boxInfo('Backend Time', browsertime.summary.timings.backEndTime)    
    if (webpagetest)
      .row
        .one-third.column
          +boxInfo('WPT render (firstView)',  webpagetest.summary.firstView.render)
        .one-third.column
          +boxInfo('WPT SpeedIndex (firstView)', webpagetest.summary.firstView.SpeedIndex)
        .one-third.column
          +boxInfo('WPT Fully loaded (firstView)', webpagetest.summary.firstView.fullyLoaded)
